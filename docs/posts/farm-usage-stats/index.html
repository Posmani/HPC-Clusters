<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Farm Usage Stats - High-Performance Computing @ UCDavis</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="Interesting statistics for the Farm cluster">
	
	<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Farm Usage Stats"/>
<meta name="twitter:description" content="Interesting statistics for the Farm cluster"/>

	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/custom.css">
	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo">
			<a class="logo__link" href="/" title="High-Performance Computing @ UCDavis" rel="home">
				<div class="logo__title">High-Performance Computing @ UCDavis</div>
				<div class="logo__tagline">Campus supercomputing resources</div>
			</a>
		</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="http://www.hpc.ucdavis.edu">home</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/posts/about/">About</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/posts/helpandsupport/">Cluster Help/Support</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/clusters/">Clusters</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="http://wiki.cse.ucdavis.edu">CSE wiki</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Farm Usage Stats</h1>
			<p class="post__lead">Tim</p>
			
		</header><div class="content post__content clearfix">
			<p>I recently ran some usage statistics on Farm, our biggest cluster, to get an idea of how
it is being used.</p>
<p>(Before continuing, please note that these are experimental and estimated results, and as such
may be subject to refinement, changes, or deletion at any given point.)</p>
<p>First, let's take a look at the usage by the top 50 users.</p>
<table>
<thead>
<tr>
<th>Date Range</th>
<th>CPU-Years</th>
<th>CPU-Days</th>
<th>CPU-Hours</th>
<th>CPU-Minutes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>01/01-05/19</strong></td>
<td><strong>610.09</strong></td>
<td><strong>222,681.3</strong></td>
<td><strong>5,344,347.05</strong></td>
<td><strong>320,660,823</strong></td>
</tr>
<tr>
<td>01/01-04/01</td>
<td>417.93</td>
<td>152,542.82</td>
<td>3,661,027.7</td>
<td>219,661,662.0</td>
</tr>
<tr>
<td>05/01-05/16</td>
<td>68.34</td>
<td>4,944.72</td>
<td>598,673.3</td>
<td>35,920,398</td>
</tr>
</tbody>
</table>
<p>A CPU-year is one CPU at 100% duty for one year.</p>
<p>Metrics from here on out get a little tricky. I'll be making a few assumptions and back-of-the-envelope shortcuts that won't
result in exact numbers, but should land us in a solid ballpark range.</p>
<p>We'll say that Farm has about 6,000 CPUs after adding about 1,500 in April/May. That's 6,000 CPU-years of
total processing theoretically available across the entire cluster anually. That's also assuming 100% availability of 100% of
assets. Which is, of course not always the case&ndash;given the fickleness of hardware and software, the vagaries of funding
and the purchasing process, maintenance windows, and so on. However, let's back things up a little bit.</p>
<p>We'll go to the beginning of April for to remove that sudden boost of 1,500 CPUs. That's a theoretical maximum of
4,500 CPU-Yrs for the year.</p>
<p>Based on that, the period from January 1-April 1 has a theoretical maximum of 1,120.5
CPU-Yrs available.</p>
<p>Let's look at total usage stats for all users:</p>
<p>Slurm sreport cluster utilization start=01/01/19 end=04/01/19:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>CPU-Years</th>
<th>CPU-Days</th>
<th>CPU-Hours</th>
<th>CPU-Minutes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Reported</td>
<td>1,179.18</td>
<td>430,400.57</td>
<td>10,329,613.5</td>
<td>619,776,819.0</td>
</tr>
<tr>
<td>Allocated</td>
<td>435.93</td>
<td>159,115.41</td>
<td>3,818,769.9</td>
<td>229,126,194.0</td>
</tr>
</tbody>
</table>
<p>Slurm's sreport command is a little vague about what &ldquo;reported&rdquo; means, but the definition I'm going with
is that it's the approximate total CPU-Years available for use in a time period, and &ldquo;allocated&rdquo;
is what was actually used by jobs during that time period.</p>
<p>(Our reported CPU-Yrs total is a little higher than our calculated theoretical maximum CPU-Yrs, but remember, that was just
an estimate. The difference works out to about one Farm III node or two older Farm II nodes.)</p>
<p>The tables reveal that the top 50 users of farm are responsible for the majority of cycles: about 418 CPU-Yrs
out of 436, or 96% of cluster use.</p>
<p>The biggest single user was responsible for about 75 CPU-Yrs alone (17% of cluster use). The top 3 users together accounted
for 186 CPU-Yrs, or about 43% of cluster use.</p>
<h2 id="conclusions">Conclusions</h2>
<p>There are a couple takeaways that I read from all this. First, we can be pretty proud of our uptime for Farm.
We're very close to our theoretical maximum cycles available, meaning we're keeping nodes up and ready to use
as much as possible, all while using minimal staff and low overhead. And while Farm is our largest cluster,
it's not our only cluster &ndash; we're currently managing nine other clusters, as well.</p>
<p>It also looks like Farm is running at somewhere around 1/3rd to 1/2 capacity on average, which isn't bad at all.
Usage often happens in bursts, so while there are times when almost all of the CPU cycles are booked, for the most part
we almost always have some extra cycles available whenever someone needs them&ndash;even without our &ldquo;one-minute guarantee.&rdquo;
That's a good sign that the cluster is healthy, seeing regular use, and is at the right size to meet the needs of the current users.</p>
<p>-TDT@CSE</p>
		</div>
		
<div class="post__tags tags clearfix">
	<svg class="tags__icon icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item"><a class="tags__link btn" href="/tags/blog/" rel="tag">blog</a></li>
	</ul>
</div>
	</article>
</main>


<nav class="post-nav flex">
	<div class="post-nav__item post-nav__item--prev">
		<a class="post-nav__link" href="/posts/hpc-schools/" rel="prev"><span class="post-nav__caption">«&thinsp;Previous</span><p class="post-nav__post-title">HPC Department Comparisons</p></a>
	</div>
	<div class="post-nav__item post-nav__item--next">
		<a class="post-nav__link" href="/posts/about_farm/" rel="next"><span class="post-nav__caption">Next&thinsp;»</span><p class="post-nav__post-title">About the Farm Cluster</p></a>
	</div>
</nav>


			</div>
			<aside class="sidebar"><div class="widget-search widget">
	<form class="widget-search__form" role="search" method="get" action="https://google.com/search">
		<label>
			<input class="widget-search__field" type="search" placeholder="SEARCH..." value="" name="q" aria-label="SEARCH...">
		</label>
		<input class="widget-search__submit" type="submit" value="Search">
		<input type="hidden" name="sitesearch" value="http://www.hpc.ucdavis.edu" />
	</form>
</div>
<div class="widget-recent widget">
	<h4 class="widget__title">Recent Posts</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/posts/about_farm/">About the Farm Cluster</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/farm-usage-stats/">Farm Usage Stats</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/hpc-schools/">HPC Department Comparisons</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/helpandsupport/">Cluster Help/Support</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/about/">About</a></li>
		</ul>
	</div>
</div>
<div class="widget-categories widget">
	<h4 class="widget__title">Categories</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/categories/blog">Blog</a></li>
			<li class="widget__item"><a class="widget__link" href="/categories/information">Information</a></li>
			<li class="widget__item"><a class="widget__link" href="/categories/system">System</a></li>
		</ul>
	</div>
</div>
<div class="widget-taglist widget">
	<h4 class="widget__title">Tags</h4>
	<div class="widget__content">
		<a class="widget-taglist__link widget__link btn" href="/tags/blog" title="Blog">Blog</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/info" title="Info">Info</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/system" title="System">System</a>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2020 High-Performance Computing @ UCDavis.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script></body>
</html>